{"version":3,"sources":["components/showcase/showcase.js"],"names":["exports","initShowcase","setShowcase","findShowcase","getShowcase","setGallery","findGallery","getGallery","setImages","findImages","getImages","insertEmailHrefs","initKeyboardActions","startSlideshow","showcase","stopSlideshow","bumpGallery","showNextImage","showPreviousImage","toggleDetails","getKeyboardActions","internals","keyboardActions","KEYCODE_SPACEBAR","KEYCODE_ARROW_LEFT","KEYCODE_ARROW_RIGHT","KEYCODE_ARROW_UP","hideDetails","KEYCODE_ARROW_DOWN","showDetails","KEYCODE_ESCAPE","window","addEventListener","dispatchKeyboardActions","event","preventDefault","keyCode","hasKeyboardActionHandler","shiftKey","hasOwnProperty","Object","prototype","toString","call","isDetailsFolded","classList","add","CLASS_NAME_SHOWCASE_DETAILS_FOLDED","remove","isSlideshowActive","resetSlideshowInterval","clearInterval","slideshowInterval","CLASS_NAME_SHOWCASE_SLIDESHOW_ACTIVE","isForcedUpdate","setInterval","SLIDESHOW_INTERVAL","isInitiatedByUser","isInvertedOrder","showImage","getActiveImageIndex","imageIndex","setActiveImageIndex","clearActiveImages","CLASS_NAME_SHOWCASE_ACTIVE_IMAGE","activeImageIndex","isFinite","length","activeImages","findActiveImages","idx","querySelectorAll","SELECTOR_SHOWCASE_ACTIVE_IMAGE","images","SELECTOR_SHOWCASE_IMAGE","gallery","querySelector","SELECTOR_SHOWCASE_GALLERY","document","SELECTOR_SHOWCASE","emailLinks","SELECTOR_CONTACT_EMAIL","bits","emailHref","join","split","reverse","itemTitle","textContent","concat","href","CLASS_NAME_SHOWCASE","CLASS_NAME_SHOWCASE_GALLERY","CLASS_NAME_SHOWCASE_IMAGE","CLASS_NAME_SHOWCASE_CONTACT_EMAIL","this"],"mappings":"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","file":"sale.js","sourcesContent":["(function (exports) {\n\t// jshint esnext: true\n\t'use strict';\n\n\tvar CLASS_NAME_SHOWCASE = 'showcase';\n\tvar CLASS_NAME_SHOWCASE_GALLERY = 'showcase-gallery';\n\tvar CLASS_NAME_SHOWCASE_IMAGE = 'showcase-image';\n\tvar CLASS_NAME_SHOWCASE_ACTIVE_IMAGE = 'showcase-image-active';\n\tvar CLASS_NAME_SHOWCASE_SLIDESHOW_ACTIVE = 'showcase-slideshow-active';\n\tvar CLASS_NAME_SHOWCASE_CONTACT_EMAIL = 'showcase-contact-email';\n\tvar CLASS_NAME_SHOWCASE_DETAILS_FOLDED = 'showcase-details-folded';\n\n\tvar SELECTOR_SHOWCASE = '.' + CLASS_NAME_SHOWCASE;\n\tvar SELECTOR_SHOWCASE_GALLERY = '.' + CLASS_NAME_SHOWCASE_GALLERY;\n\tvar SELECTOR_SHOWCASE_IMAGE = '.' + CLASS_NAME_SHOWCASE_IMAGE;\n\tvar SELECTOR_SHOWCASE_ACTIVE_IMAGE = '.' + CLASS_NAME_SHOWCASE_ACTIVE_IMAGE;\n\tvar SELECTOR_CONTACT_EMAIL = '.' + CLASS_NAME_SHOWCASE_CONTACT_EMAIL;\n\n\tvar SLIDESHOW_INTERVAL = 6666;\n\n\tvar KEYCODE_SPACEBAR = 32;\n\tvar KEYCODE_ARROW_LEFT = 37;\n\tvar KEYCODE_ARROW_RIGHT = 39;\n\tvar KEYCODE_ARROW_UP = 38;\n\tvar KEYCODE_ARROW_DOWN = 40;\n\tvar KEYCODE_ESCAPE = 27;\n\n\tvar internals = {};\n\n\twindow.addEventListener('load', initShowcase, false);\n\n\tfunction initShowcase() {\n\t\tsetShowcase(findShowcase());\n\t\tif (!getShowcase()) {\n\t\t\treturn;\n\t\t}\n\t\tsetGallery(findGallery());\n\t\tif (!getGallery()) {\n\t\t\treturn;\n\t\t}\n\t\tsetImages(findImages());\n\t\tif (!getImages()) {\n\t\t\treturn;\n\t\t}\n\t\tinsertEmailHrefs();\n\t\tinitKeyboardActions();\n\t\tstartSlideshow(true);\n\t\texports.showcase = {\n\t\t\tstartSlideshow: startSlideshow,\n\t\t\tstopSlideshow: stopSlideshow,\n\t\t\tbumpGallery: bumpGallery,\n\t\t\tshowNextImage: showNextImage,\n\t\t\tshowPreviousImage: showPreviousImage,\n\t\t\ttoggleDetails: toggleDetails\n\t\t};\n\t}\n\n\tfunction getKeyboardActions() {\n\t\treturn internals.keyboardActions;\n\t}\n\n\tfunction initKeyboardActions() {\n\t\tinternals.keyboardActions = {};\n\t\tinternals.keyboardActions[KEYCODE_SPACEBAR] = bumpGallery;\n\t\tinternals.keyboardActions[KEYCODE_ARROW_LEFT] = showPreviousImage;\n\t\tinternals.keyboardActions[KEYCODE_ARROW_RIGHT] = showNextImage;\n\t\tinternals.keyboardActions[KEYCODE_ARROW_UP] = hideDetails;\n\t\tinternals.keyboardActions[KEYCODE_ARROW_DOWN] = showDetails;\n\t\tinternals.keyboardActions[KEYCODE_ESCAPE] = toggleDetails;\n\t\twindow.addEventListener('keyup', dispatchKeyboardActions, false);\n\t}\n\n\tfunction dispatchKeyboardActions(event) {\n\t\tif (!event) {\n\t\t\treturn;\n\t\t}\n\t\tvar keyboardActions = getKeyboardActions();\n\t\tif (!keyboardActions) {\n\t\t\treturn;\n\t\t}\n\t\tevent.preventDefault();\n\t\tif (!event.keyCode) {\n\t\t\treturn;\n\t\t}\n\t\tvar keyCode = event.keyCode;\n\t\tif (hasKeyboardActionHandler(keyCode)) {\n\t\t\tkeyboardActions[keyCode](true, event.shiftKey);\n\t\t}\n\t}\n\n\tfunction hasKeyboardActionHandler(keyCode) {\n\t\tvar keyboardActions = getKeyboardActions();\n\t\tif (!keyboardActions) {\n\t\t\treturn;\n\t\t}\n\t\tif (!keyboardActions.hasOwnProperty(keyCode)) {\n\t\t\treturn;\n\t\t}\n\t\treturn Object.prototype.toString.call(keyboardActions[keyCode]) === '[object Function]';\n\t}\n\n\tfunction toggleDetails() {\n\t\tif (isDetailsFolded()) {\n\t\t\tshowDetails();\n\t\t\treturn;\n\t\t}\n\t\thideDetails();\n\t}\n\n\tfunction isDetailsFolded() {\n\t\treturn internals.isDetailsFolded;\n\t}\n\n\tfunction hideDetails() {\n\t\tif (!getShowcase()) {\n\t\t\treturn;\n\t\t}\n\t\tgetShowcase().classList.add(CLASS_NAME_SHOWCASE_DETAILS_FOLDED);\n\t\tinternals.isDetailsFolded = true;\n\t}\n\n\tfunction showDetails() {\n\t\tif (!getShowcase()) {\n\t\t\treturn;\n\t\t}\n\t\tgetShowcase().classList.remove(CLASS_NAME_SHOWCASE_DETAILS_FOLDED);\n\t\tinternals.isDetailsFolded = false;\n\t}\n\n\tfunction isSlideshowActive() {\n\t\treturn internals.isSlideshowActive;\n\t}\n\n\tfunction resetSlideshowInterval() {\n\t\tstopSlideshow();\n\t\tstartSlideshow();\n\t}\n\n\tfunction stopSlideshow() {\n\t\tclearInterval(internals.slideshowInterval);\n\t\tinternals.isSlideshowActive = false;\n\t\tgetShowcase().classList.remove(CLASS_NAME_SHOWCASE_SLIDESHOW_ACTIVE);\n\t}\n\n\tfunction startSlideshow(isForcedUpdate) {\n\t\tif (!getImages()) {\n\t\t\treturn;\n\t\t}\n\t\tif (isForcedUpdate) {\n\t\t\tshowNextImage();\n\t\t}\n\t\tinternals.slideshowInterval = setInterval(showNextImage, SLIDESHOW_INTERVAL);\n\t\tinternals.isSlideshowActive = true;\n\t\tgetShowcase().classList.add(CLASS_NAME_SHOWCASE_SLIDESHOW_ACTIVE);\n\t}\n\n\tfunction bumpGallery(isInitiatedByUser, isInvertedOrder) {\n\t\tif (isInvertedOrder) {\n\t\t\tshowPreviousImage(isInitiatedByUser);\n\t\t\treturn;\n\t\t}\n\t\tshowNextImage(isInitiatedByUser);\n\t}\n\n\tfunction showPreviousImage(isInitiatedByUser) {\n\t\tshowImage(getActiveImageIndex() - 1);\n\t\tif (isInitiatedByUser) {\n\t\t\tstopSlideshow();\n\t\t}\n\t}\n\n\tfunction showNextImage(isInitiatedByUser) {\n\t\tshowImage(getActiveImageIndex() + 1);\n\t\tif (isInitiatedByUser) {\n\t\t\tstopSlideshow();\n\t\t}\n\t}\n\n\tfunction showImage(imageIndex) {\n\t\tif (!getImages()) {\n\t\t\treturn;\n\t\t}\n\t\tsetActiveImageIndex(imageIndex);\n\t\tclearActiveImages();\n\t\tgetImages()[getActiveImageIndex()].classList.add(CLASS_NAME_SHOWCASE_ACTIVE_IMAGE);\n\t\tif (isSlideshowActive()) {\n\t\t\tresetSlideshowInterval();\n\t\t}\n\t}\n\n\tfunction getActiveImageIndex() {\n\t\treturn internals.activeImageIndex || 0;\n\t}\n\n\tfunction setActiveImageIndex(imageIndex) {\n\t\tif (Object.prototype.toString.call(imageIndex) !== '[object Number]') {\n\t\t\treturn;\n\t\t}\n\t\tif (!isFinite(imageIndex)) {\n\t\t\treturn;\n\t\t}\n\t\tif (imageIndex >= getImages().length) {\n\t\t\tinternals.activeImageIndex = 0;\n\t\t\treturn;\n\t\t}\n\t\tif (imageIndex < 0) {\n\t\t\tinternals.activeImageIndex = getImages().length - 1;\n\t\t\treturn;\n\t\t}\n\t\tinternals.activeImageIndex = imageIndex;\n\t}\n\n\tfunction clearActiveImages() {\n\t\tvar activeImages = findActiveImages();\n\t\tif (!activeImages) {\n\t\t\treturn;\n\t\t}\n\t\tvar idx;\n\t\tfor (idx = 0; idx < activeImages.length; idx += 1) {\n\t\t\tactiveImages[idx].classList.remove(CLASS_NAME_SHOWCASE_ACTIVE_IMAGE);\n\t\t}\n\t}\n\n\tfunction findActiveImages() {\n\t\tif (!getGallery()) {\n\t\t\treturn;\n\t\t}\n\t\treturn getGallery().querySelectorAll(SELECTOR_SHOWCASE_ACTIVE_IMAGE);\n\t}\n\n\tfunction getImages() {\n\t\treturn internals.images;\n\t}\n\n\tfunction setImages(images) {\n\t\tif (!images) {\n\t\t\treturn;\n\t\t}\n\t\tinternals.images = images;\n\t}\n\n\tfunction findImages() {\n\t\tif (!getGallery()) {\n\t\t\treturn;\n\t\t}\n\t\treturn getGallery().querySelectorAll(SELECTOR_SHOWCASE_IMAGE);\n\t}\n\n\tfunction getGallery() {\n\t\treturn internals.gallery;\n\t}\n\n\tfunction setGallery(gallery) {\n\t\tif (!gallery) {\n\t\t\treturn;\n\t\t}\n\t\tinternals.gallery = gallery;\n\t}\n\n\tfunction findGallery() {\n\t\tif (!getShowcase()) {\n\t\t\treturn;\n\t\t}\n\t\treturn getShowcase().querySelector(SELECTOR_SHOWCASE_GALLERY);\n\t}\n\n\tfunction getShowcase() {\n\t\treturn internals.showcase;\n\t}\n\n\tfunction setShowcase(showcase) {\n\t\tif (!showcase) {\n\t\t\treturn;\n\t\t}\n\t\tinternals.showcase = showcase;\n\t}\n\n\tfunction findShowcase() {\n\t\treturn document.querySelector(SELECTOR_SHOWCASE);\n\t}\n\n\tfunction insertEmailHrefs() {\n\t\tvar showcase = getShowcase();\n\t\tif (!showcase) {\n\t\t\treturn;\n\t\t}\n\t\tvar emailLinks = showcase.querySelectorAll(SELECTOR_CONTACT_EMAIL);\n\t\tif (!emailLinks) {\n\t\t\treturn;\n\t\t}\n\t\tvar bits = [\n\t\t\t'moc.xmg',\n\t\t\t'@',\n\t\t\t'nigluhs',\n\t\t\t'.',\n\t\t\t'notna'\n\t\t];\n\t\tvar emailHref = [\n\t\t\t'mailto:',\n\t\t\tbits.join('').split('').reverse().join(''),\n\t\t];\n\t\tvar itemTitle = showcase.querySelector('h1');\n\t\tif (itemTitle && itemTitle.textContent) {\n\t\t\temailHref = emailHref.concat([\n\t\t\t\t'?subject=',\n\t\t\t\titemTitle.textContent\n\t\t\t]);\n\t\t}\n\t\temailHref = emailHref.join('');\n\t\tvar idx;\n\t\tfor (idx = 0; idx < emailLinks.length; idx += 1) {\n\t\t\temailLinks[idx].href = emailHref;\n\t\t}\n\t}\n\n})(this);\n"]}